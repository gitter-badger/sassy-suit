///
/// Mixin for generating gutters
///
/// Output of gutter classes depends on global configuration
///
/// @group grid
///
/// @param {map} layout ($grid) Map for storing grid configurations
///
/// @throw "#{$layout} is invalid argument for `grid-space-units` function"
///
/// @todo use SASS 3.4 selector function
///
/// [Selector Functions](sass-lang.com/documentation/Sass/Script/Functions.html)
///
/// [Blog post on Selector Functions](http://www.phase2technology.com/blog/everything-you-need-to-know-about-sass-3-4/)
///

@mixin gutters($layout: $grid) {
	@if exists(grid-space-units, mixin) {
		@include grid-space-units($layout);
		// outputs generated $grid-space-units - global variable
		$direction-output: map-get($layout, direction-output);
		$values: map-get($layout, values);
		$bp-value-flow: map-get($layout, bp-value-flow);
		$direction-output: map-get($layout, direction-output);
		$sizing-output: map-get($layout, sizing-output);
		$bp-output: map-get($layout, bp-output);
		$bp-class-names: map-get($layout, bp-class-names);
		$space-unit-class-names: map-get($layout, space-unit-class-names);
		$direction-class-names: map-get($layout, direction-class-names);
		$gutter-class-name: map-get($layout, gutter-class-name);
		$block-class-name: map-get($layout, block-class-name);

		@debug $direction-output 		'direction-output';
		@debug $values 					'value';
		@debug $bp-value-flow 			'bp-value-flow';
		@debug $direction-output 		'direction-output';
		@debug $sizing-output 			'sizing-output';
		@debug $bp-output 				'bp-output';
		@debug $bp-class-names 			'bp-class-names';
		@debug $space-unit-class-names 	'space-unit-class-names';
		@debug $direction-class-names 	'direction-class-names';
		@debug $gutter-class-name 		'gutter-class-name';
		@debug $block-class-name 		'block-class-name';

		@if $values == 'space-unit-fallback' {

			.#{$block-class-name}__#{$gutter-class-name} {
				padding-left: $grid-space-units;
				padding-right: $grid-space-units;
			}

			@if $direction-output {

				.#{$block-class-name}__#{$gutter-class-name}--#{nth($direction-class-names, 1)} {
					padding-left: $grid-space-units;
				}

				.#{$block-class-name}__#{$gutter-class-name}--#{nth($direction-class-names, 2)} {
					padding-right: $grid-space-units;
				}
			}
		}
		@if $values == not not index('space-units' 'ms', $values) {

			@if $bp-output {
				@if $sizing-output and not $direction-output {
					.g-xs__gutter-xs {
						// padding-left: nth($grid-space-units, 1);
						// padding-right: nth($grid-space-units, 1);
					}
					.g-sm__gutter-xs {
						// @include bp(sm) {
							// padding-left: nth($grid-space-units, 1);
							// padding-right: nth($grid-space-units, 1);
						// }
					}
					// ...
					.g-xs__gutter-xxl {
						// padding-left: nth($grid-space-units, last($grid-space-units));
						// padding-right: nth($grid-space-units, last($grid-space-units));
					}
					.g-sm__gutter-xxl {
						// @include bp(sm) {
							// padding-left: nth($grid-space-units, last($grid-space-units));
							// padding-right: nth($grid-space-units, last($grid-space-units));
						// }
					}
					// Other breakpoints
					// ...
				}

				@if $direction-output and not $sizing-output {
					.g-xs__gutter-before {
						// padding-left: nth($grid-space-units, 1);
					}
					.g-xs__gutter-after {
						// padding-right: nth($grid-space-units, 1);
					}
					.g-sm__gutter-before {
						// padding-left: nth($grid-space-units, 2);
					}
					.g-sm__gutter-after {
						// padding-right: nth($grid-space-units, 2);
					}
				}

				@if $direction-output and $sizing-output {
					.g-xs__gutter-xs {
						// padding-left: nth($grid-space-units, 1);
						// padding-right: nth($grid-space-units, 1);
					}
					.g-xs__gutter-xs {
						// padding-left: nth($grid-space-units, 1);
						// padding-right: nth($grid-space-units, 1);
					}
					.g-xs__gutter-xs-before {
						// padding-left: nth($grid-space-units, 1);
					}
					.g-xs__gutter-xs-before {
						// padding-left: nth($grid-space-units, 1);
					}
					.g-xs__gutter-xs-after {
						// padding-right: nth($grid-space-units, 1);
					}
					.g-xs__gutter-xs-after {
						// padding-right: nth($grid-space-units, 1);
					}
					// Other breakpoints
					// .g-<sm>.....
					// ...
				}
			}

			@if not $bp-output {
				@if $sizing-output and not $direction-output {
					.g__gutters-xs {}
					.g__gutters-sm {}
					.g__gutters-md {}
				}

				@if $sizing-output and $direction-output {
					.g__gutters-xs-after {}
					.g__gutters-xs-before {}
					.g__gutters-sm-after {}
					.g__gutters-sm-before {}
				}
				@if not $sizing-output {

					@error ' `bp-output == false` and `sizing-output == false` are invalid settings of grid configuration. Consider using `$values == 'space-unit-fallback'` ';

				}
			}
		}

		@if $values == 'ms' {
			// all options which play with ms
			// same as $values == 'space-units'
			// but instead of `space-units`
		}

	} @else {

		@error '`grid-space-units` function is not existing';

	}
}

@include gutters($grid);
